<Mods LoadCommand = "%xero(function(self)
	if not P1 or not P2 then
		backToSongWheel('Two Player Mode Required')
		return
	end

	-- judgment / combo proxies
	for pn = 1, 2 do
		setupJudgeProxy(PJ[pn], P[pn]:GetChild('Judgment'), pn)
		setupJudgeProxy(PC[pn], P[pn]:GetChild('Combo'), pn)
	end
	-- player proxies
	for pn = 1, #PP do
		PP[pn]:SetTarget(P[pn])
		P[pn]:hidden(1)
	end
	-- your code goes here here:
	
	--define scalex and scaley
	scalex = SCREEN_WIDTH / 640
	scaley = SCREEN_HEIGHT / 480
	
	
	--load chess engine
	dofile ('lua/sunfish/sunfish.lua')
	
	--set sprite layers to not animate
	piece:animate(0)
	boardtile:animate(0)
	piece:zoom(0.5)
	boardtile:zoom(0.5)
	
	local function drawpiece(p,x,y)
		piece:x(x)
		piece:y(y)
		piece:setstate(p)
		piece:Draw()
	end
	local function drawtile(p,x,y)
		boardtile:x(x)
		boardtile:y(y)
		boardtile:setstate(p)
		boardtile:Draw()
	end
	local function drawboard(bx,by)
		bx = bx or 0
		by = by or 0
		for x=0,7 do
			for y=0,7 do
				-- in the case of a non 4:3 aspect ratio, scaley is usually smaller.
				drawtile((x+y)%2, x*50*scaley+bx,y*50*scaley+by)
			end
		end
	end
	
	
	chess:SetDrawFunction(function(self)
		drawboard(25*scalex,25*scaley)
		--for i=0,11 do
			--drawpiece(i,i*50+50,SCREEN_HEIGHT/2+math.sin(i)*50)
		--end
	end)
	
	
	
	
end)"
Type = "ActorFrame"
><children>
	<Layer Type = "ActorProxy" Name = "PC[1]" />
	<Layer Type = "ActorProxy" Name = "PC[2]" />
	<Layer Type = "ActorProxy" Name = "PJ[1]" />
	<Layer Type = "ActorProxy" Name = "PJ[2]" />
	<Layer Type = "ActorProxy" Name = "PP[1]" />
	<Layer Type = "ActorProxy" Name = "PP[2]" />
	
	<Layer Type = "ActorFrame" Name = "chess"> <children>
		<Layer File = 'chess.sprite' Name = "piece" />
		<Layer File = 'board.sprite' Name = "boardtile" />
	</children> </Layer>
</children></Mods>
